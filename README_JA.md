# Paper Catcher

> **学術論文の自動収集・AI翻訳・管理システム**

![Paper Catcher](https://files.manuscdn.com/user_upload_by_module/session_file/310419663028639648/WiNBTnxpYUYeuVNW.png)

Paper Catcherは、arXivから学術論文を自動的に収集し、AIを使用して日本語に翻訳し、研究者や学者が関心のある分野の最新研究を効率的に発見・管理できるフルスタックWebアプリケーションです。

---

## 目次

- [概要](#概要)
- [主な機能](#主な機能)
- [技術スタック](#技術スタック)
- [システムアーキテクチャ](#システムアーキテクチャ)
- [はじめに](#はじめに)
- [プロジェクト構成](#プロジェクト構成)
- [API仕様](#api仕様)
- [データベーススキーマ](#データベーススキーマ)
- [デプロイ](#デプロイ)
- [既知の制限事項](#既知の制限事項)
- [今後の拡張予定](#今後の拡張予定)
- [ライセンス](#ライセンス)

---

## 概要

Paper Catcherは、英語で発表される学術研究と日本語を使用する研究者のギャップを埋めるために設計されました。arXivの包括的な論文データベースとAIの言語処理能力を組み合わせることで、以下の機能を提供します。

- **自動論文発見**: ユーザーが定義したキーワードに一致するarXivの新規論文を継続的に監視
- **インテリジェント翻訳**: 論文のタイトルと要旨を学術的な日本語に翻訳（専門用語を保持）
- **効率的な管理**: ソート、フィルタリング、詳細表示機能により論文を整理
- **ソーシャル共有**: リッチプレビューカード（OGP）を生成してソーシャルメディアでの共有に対応

### 主要統計

| 指標 | 値 |
|--------|-------|
| **フロントエンドフレームワーク** | React 19 |
| **バックエンドランタイム** | Node.js + Express 4 |
| **データベース** | MySQL + Drizzle ORM |
| **APIフレームワーク** | tRPC 11 |
| **スタイリング** | Tailwind CSS 4 |
| **対応キーワード数** | 無制限 |
| **論文保存容量** | 無制限（データベース管理） |

---

## 主な機能

### コア機能

#### 1. **キーワード管理**
- キーワードの追加、編集、削除が可能
- キーワードの有効/無効を切り替えて論文取得を制御
- リアルタイムのキーワード状態追跡
- 複雑な検索用語に対応（例：「機械学習」、「深層学習」、「トランスフォーマー」）

#### 2. **自動論文取得**
- arXiv APIと統合してリアルタイムで論文を発見
- アクティブなキーワードに一致する論文を取得
- 重複排除により同じ論文の重複登録を防止
- 論文のメタデータを保持：タイトル、著者、要旨、公開日、カテゴリ
- arXivページとPDFダウンロードへの直接リンクを生成

#### 3. **AI駆動の翻訳**
- 論文のタイトルと要旨を日本語に翻訳
- Google Gemini APIを使用した高品質な学術翻訳
- 技術用語と科学的正確性を保持
- 翻訳エラーをグレースフルに処理

#### 4. **論文表示・管理**
- レスポンシブな論文カードレイアウト
- 表示内容：タイトル（英語/日本語）、著者、ジャーナル/カテゴリ、公開日、要旨プレビュー
- 詳細な論文表示ダイアログ（完全な要旨を表示）
- 論文削除機能

#### 5. **ソート・整理機能**
- 登録日でソート（最新順）
- 公開日でソート（最新の論文を優先）
- ジャーナル/カテゴリでソート（アルファベット順）
- ソート設定を保持

#### 6. **ソーシャルメディア統合**
- Open Graph（OGP）メタタグによるリッチプレビュー
- Twitterカード対応で共有時の表示を最適化
- カスタムOGP画像（1536x1024px）
- SEO最適化用の動的メタタグ

#### 7. **検索エンジン最適化**
- 適切なヘッダー階層を持つセマンティックHTML構造
- 学術研究用語をターゲットとしたメタキーワード
- 最適化されたページタイトル
- 包括的なメタディスクリプション
- schema.org統合に対応した構造化データ

#### 8. **共有機能**
- 「共有」ボタンでarXiv URLをクリップボードにコピー
- コピー成功時にビジュアルフィードバック表示
- 2秒後に自動的に元の状態に戻る

#### 9. **関連論文表示**
- 現在表示中の論文に関連する論文を自動検出
- キーワード、タイトル単語、著者情報に基づいてスコアリング
- 最大5件の関連論文を表示
- 関連論文をクリックして詳細を表示

---

## 技術スタック

### フロントエンド
| 技術 | 用途 | バージョン |
|-----------|---------|---------|
| **React** | UIフレームワーク | 19.2.1 |
| **TypeScript** | 型安全性 | 5.9.3 |
| **Tailwind CSS** | スタイリング | 4.1.14 |
| **shadcn/ui** | コンポーネントライブラリ | Latest |
| **Lucide React** | アイコン | 0.453.0 |
| **Framer Motion** | アニメーション | 12.23.22 |
| **Recharts** | データ可視化 | 2.15.2 |
| **Wouter** | ルーティング | 3.3.5 |
| **Zod** | スキーマ検証 | 4.1.12 |

### バックエンド
| 技術 | 用途 | バージョン |
|-----------|---------|---------|
| **Express** | HTTPサーバー | 4.21.2 |
| **tRPC** | 型安全RPC | 11.6.0 |
| **Node.js** | ランタイム | 22.13.0 |
| **TypeScript** | 型安全性 | 5.9.3 |
| **Drizzle ORM** | データベースORM | 0.44.5 |

### データベース
| 技術 | 用途 | バージョン |
|-----------|---------|---------|
| **MySQL** | リレーショナルデータベース | 8.0+ |
| **Drizzle Kit** | マイグレーションツール | 0.31.4 |

### 外部API
| サービス | 用途 | 認証 |
|---------|---------|-----------------|
| **arXiv API** | 論文検索・メタデータ取得 | 公開（認証不要） |
| **Google Gemini API** | 翻訳サービス | APIキー |

### DevOps・デプロイ
| ツール | 用途 |
|------|---------|
| **Vite** | ビルドツール・開発サーバー |
| **pnpm** | パッケージマネージャー |
| **Vitest** | ユニットテスト |
| **Prettier** | コードフォーマッター |
| **esbuild** | 本番環境用バンドラー |

---

## システムアーキテクチャ

### 設計方針

Paper Catcherは**3層アーキテクチャ**に従い、関心の分離を明確にしています。

```
┌─────────────────────────────────────────────────────────────┐
│                  クライアント層（React）                      │
│  - UIコンポーネント（論文カード、キーワード管理）             │
│  - tRPCクライアント（型安全なAPI呼び出し）                   │
│  - 状態管理（React Query）                                   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│                 サーバー層（Node.js）                         │
│  - Express HTTPサーバー                                      │
│  - tRPCルーター（プロシージャ・ミドルウェア）                │
│  - ビジネスロジック（論文取得、翻訳）                        │
│  - データベースヘルパー（クエリ関数）                        │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│              データ・外部サービス層                           │
│  - MySQLデータベース（論文、キーワード、ユーザー）           │
│  - arXiv API（論文発見）                                     │
│  - Google Gemini API（翻訳サービス）                         │
└─────────────────────────────────────────────────────────────┘
```

### データフロー

#### 1. **論文発見フロー**
```
ユーザーが「論文を取得」をクリック
  ↓
サーバーがアクティブなキーワードをクエリ
  ↓
各キーワードについてarXiv APIを呼び出し
  ↓
XML応答をパース
  ↓
データベース内の重複をチェック
  ↓
新規論文を保存
  ↓
結果をクライアントに返す
```

#### 2. **翻訳フロー**
```
論文がデータベースに保存
  ↓
サーバーがGoogle Gemini APIを呼び出し（タイトル+要旨）
  ↓
LLMが日本語翻訳を返す
  ↓
翻訳内容で論文レコードを更新
  ↓
クライアントが翻訳済みコンテンツを表示
```

#### 3. **表示フロー**
```
クライアントがソート設定付きで論文をリクエスト
  ↓
サーバーがソート順序付きでデータベースをクエリ
  ↓
ページネーション済みの結果を返す
  ↓
クライアントが論文カードをレンダリング
  ↓
ユーザーが詳細を表示または論文を削除可能
```

### 技術選定の根拠

| コンポーネント | 選択 | 根拠 |
|-----------|--------|-----------|
| **React** | フロントエンドフレームワーク | コンポーネントベース、優れたエコシステム、大規模コミュニティ |
| **tRPC** | APIレイヤー | 型安全なエンドツーエンド、APIコントラクトドリフトを排除 |
| **Express** | HTTPサーバー | 軽量、成熟、優れたミドルウェアエコシステム |
| **MySQL** | データベース | 信頼性、スケーラビリティ、構造化学術データに適している |
| **Drizzle ORM** | データアクセス | 型安全なクエリ、最小限の抽象化、優れたTypeScript対応 |
| **Tailwind CSS** | スタイリング | ユーティリティファースト、レスポンシブデザイン、迅速な開発 |
| **Google Gemini API** | 翻訳 | 最先端のLLM、優れた日本語対応 |
| **arXiv API** | 論文ソース | 包括的な学術論文データベース、オープンアクセス |

---

## はじめに

### 必要な環境

- **Node.js**: 22.13.0以上
- **pnpm**: 10.4.1以上
- **MySQL**: 8.0以上
- **Google Gemini API キー**: 翻訳機能用

### インストール

1. **リポジトリをクローン**:
   ```bash
   git clone https://github.com/Tabibito-AI/paper-catcher2.git
   cd paper-catcher
   ```

2. **依存関係をインストール**:
   ```bash
   pnpm install
   ```

3. **環境変数を設定**:
   ```bash
   # .env.localファイルを作成
   cp .env.example .env.local
   
   # 以下の設定を追加:
   DATABASE_URL=mysql://user:password@localhost:3306/paper_catcher
   GOOGLE_GEMINI_API_KEY=your-api-key
   JWT_SECRET=your-secret-key
   ```

4. **データベースを初期化**:
   ```bash
   pnpm db:push
   ```

5. **開発サーバーを起動**:
   ```bash
   pnpm dev
   ```

   アプリケーションは `http://localhost:3000` で利用可能になります

### クイックテスト

1. アプリケーションにアクセス
2. キーワードを追加（例：「機械学習」）
3. 「論文を取得」をクリックしてarXivから論文を取得
4. 論文がカードとして表示される（英語のタイトルと要旨）
5. 翻訳が完了すると日本語の翻訳が表示される（Google Gemini APIが利用可能な場合）

---

## プロジェクト構成

```
paper-catcher/
├── client/                          # フロントエンドアプリケーション
│   ├── public/                      # 静的アセット
│   │   ├── og-image.png            # OGPプレビュー画像
│   │   └── ...
│   ├── src/
│   │   ├── components/             # 再利用可能なReactコンポーネント
│   │   │   ├── ui/                # shadcn/uiコンポーネント
│   │   │   ├── PaperDetailDialog.tsx  # 論文詳細ダイアログ
│   │   │   └── ...
│   │   ├── pages/                 # ページレベルコンポーネント
│   │   │   └── Home.tsx           # メインアプリケーションページ
│   │   ├── lib/
│   │   │   └── trpc.ts            # tRPCクライアント設定
│   │   ├── contexts/              # Reactコンテキスト
│   │   ├── hooks/                 # カスタムReactフック
│   │   ├── App.tsx                # アプリケーションルート
│   │   ├── main.tsx               # エントリーポイント
│   │   └── index.css              # グローバルスタイル
│   ├── index.html                 # HTMLテンプレート（OGPメタタグ含む）
│   ├── vite.config.ts             # Vite設定
│   └── tsconfig.json              # TypeScript設定
│
├── server/                          # バックエンドアプリケーション
│   ├── _core/                      # フレームワークコア（編集不可）
│   │   ├── index.ts               # サーバーエントリーポイント
│   │   ├── context.ts             # tRPCコンテキスト
│   │   ├── llm.ts                 # LLM統合
│   │   └── ...
│   ├── db.ts                       # データベースクエリヘルパー
│   ├── routers.ts                 # tRPCプロシージャ定義
│   ├── arxiv.ts                   # arXiv API統合
│   ├── auth.logout.test.ts        # テスト例
│   └── ...
│
├── drizzle/                         # データベーススキーマ
│   ├── schema.ts                  # テーブル定義
│   └── migrations/                # マイグレーションファイル
│
├── shared/                          # 共有定数・型
│   └── ...
│
├── package.json                     # プロジェクト設定
├── pnpm-lock.yaml                  # 依存関係ロックファイル
├── tsconfig.json                   # TypeScript設定
├── README.md                        # 英語版README
├── README_JA.md                    # 日本語版README（本ファイル）
└── ...
```

---

## API仕様

### tRPCプロシージャ

#### papers.list
現在保存されている論文のリストを取得します。

**入力**:
```typescript
{
  sortBy?: 'registeredAt' | 'publishedAt' | 'journal'; // ソート順序
  limit?: number; // 取得件数（デフォルト: 50）
  offset?: number; // オフセット（デフォルト: 0）
}
```

**出力**:
```typescript
{
  papers: Array<{
    id: number;
    title: string;
    titleJa?: string;
    abstract: string;
    abstractJa?: string;
    authors: string;
    journal: string;
    publishedAt: number;
    arxivUrl: string;
    pdfUrl?: string;
    keyword: string;
    registeredAt: number;
  }>;
  total: number;
}
```

#### papers.related
指定された論文に関連する論文を取得します。

**入力**:
```typescript
{
  paperId: number; // 論文ID
  limit?: number; // 取得件数（デフォルト: 5）
}
```

**出力**:
```typescript
{
  relatedPapers: Array<{
    id: number;
    title: string;
    titleJa?: string;
    authors: string;
    journal: string;
    publishedAt: number;
    score: number; // 関連度スコア
  }>;
}
```

#### keywords.list
登録されているキーワードのリストを取得します。

**出力**:
```typescript
{
  keywords: Array<{
    id: number;
    keyword: string;
    enabled: boolean;
    createdAt: number;
  }>;
}
```

---

## データベーススキーマ

### papers テーブル

| カラム名 | 型 | 説明 |
|---------|------|------|
| `id` | INT (Primary Key) | 論文の一意識別子 |
| `title` | TEXT | 英語のタイトル |
| `titleJa` | TEXT (Nullable) | 日本語に翻訳されたタイトル |
| `abstract` | LONGTEXT | 英語の要旨 |
| `abstractJa` | LONGTEXT (Nullable) | 日本語に翻訳された要旨 |
| `authors` | TEXT | カンマ区切りの著者名 |
| `journal` | VARCHAR(255) | arXivカテゴリ（例：「cs.LG」、「cs.AI」） |
| `publishedAt` | BIGINT | 公開日のUnixタイムスタンプ |
| `arxivUrl` | VARCHAR(512) | arXiv論文ページへの直接リンク |
| `pdfUrl` | VARCHAR(512) | PDFダウンロードへの直接リンク |
| `keyword` | VARCHAR(255) | この論文にマッチしたキーワード |
| `registeredAt` | BIGINT | データベースに登録された日時のUnixタイムスタンプ |

### keywords テーブル

| カラム名 | 型 | 説明 |
|---------|------|------|
| `id` | INT (Primary Key) | キーワードの一意識別子 |
| `keyword` | VARCHAR(255) | 検索キーワード |
| `enabled` | BOOLEAN | キーワードが有効か無効か |
| `createdAt` | BIGINT | 作成日時のUnixタイムスタンプ |

### リレーションシップ

```
users (1) ──── (many) papers
keywords (1) ──── (many) papers
```

---

## デプロイ

### Manusプラットフォーム（推奨）

Paper CatcherはManusプラットフォームでのデプロイに最適化されています。

1. **チェックポイントを作成**: Management UIで「Publish」ボタンをクリック
2. **公開**: 自動的にデプロイされます
3. **カスタムドメイン**: Settings → Domainsパネルで設定

### 自己ホスティングデプロイ

外部プラットフォーム（Railway、Render、Vercel）へのデプロイの場合：

1. **ビルド**:
   ```bash
   pnpm build
   ```

2. **環境変数**（デプロイプラットフォームで設定）:
   ```
   DATABASE_URL=mysql://user:password@host:3306/paper_catcher
   GOOGLE_GEMINI_API_KEY=your-api-key
   JWT_SECRET=your-secret-key
   NODE_ENV=production
   ```

3. **起動**:
   ```bash
   pnpm start
   ```

### Dockerでのデプロイ

```dockerfile
FROM node:22-alpine
WORKDIR /app
COPY package.json pnpm-lock.yaml ./
RUN npm install -g pnpm && pnpm install --frozen-lockfile
COPY . .
RUN pnpm build
EXPOSE 3000
CMD ["pnpm", "start"]
```

---

## 既知の制限事項

### 現在の制約

1. **LLM API レート制限**: Google Gemini APIのクォータが枯渇すると翻訳が失敗する可能性
   - **対応策**: リクエストキューイングとリトライロジックの実装
   - **状態**: グレースフルエラーハンドリング実装済み

2. **arXiv API レート制限**: 高頻度リクエストがスロットルされる可能性
   - **対応策**: 指数バックオフとリクエストキャッシングの実装
   - **状態**: 実装予定

3. **翻訳精度**: LLMの翻訳が技術的なニュアンスを見落とす可能性
   - **対応策**: 手動レビュー・修正インターフェース（将来の機能）
   - **状態**: 現在のユースケースでは許容範囲

4. **データベースサイズ**: 論文リストのページネーション未実装
   - **対応策**: カーソルベースのページネーション実装
   - **状態**: 次のリリースで予定

5. **スケジュール機能**: 手動の「論文を取得」ボタンが必要
   - **対応策**: cronジョブまたはスケジュール関数の実装
   - **状態**: 次のリリースで予定

---

## 今後の拡張予定

### 計画中の機能

| 機能 | 優先度 | 状態 | 予定時期 |
|---------|----------|--------|-------------------|
| スケジュール論文取得（1日2回） | 高 | 計画中 | 2026年Q1 |
| 高度な検索・フィルタリング | 高 | 計画中 | 2026年Q1 |
| お気に入り/ブックマークシステム | 中 | 計画中 | 2026年Q2 |
| PWA対応（オフラインモード） | 中 | 計画中 | 2026年Q2 |
| メールダイジェスト通知 | 中 | 計画中 | 2026年Q2 |
| 多言語対応 | 低 | 計画中 | 2026年Q3 |
| 協調論文コレクション | 低 | 計画中 | 2026年Q3 |
| 引用形式エクスポート（BibTeX、RIS） | 低 | 計画中 | 2026年Q4 |

### 技術的改善

- [ ] リクエストレート制限とキャッシングの実装
- [ ] 包括的なエラートラッキング（Sentry）の追加
- [ ] データベースクエリの最適化
- [ ] API ドキュメント（OpenAPI/Swagger）の追加
- [ ] テストカバレッジの向上（目標: 80%以上）
- [ ] CI/CDパイプラインの実装
- [ ] パフォーマンス監視の追加

---

## 貢献

貢献を歓迎します。以下のガイドラインに従ってください。

1. **リポジトリをフォーク**
2. **フィーチャーブランチを作成**: `git checkout -b feature/your-feature`
3. **変更をコミット**: `git commit -am 'Add your feature'`
4. **ブランチにプッシュ**: `git push origin feature/your-feature`
5. **プルリクエストを送信**

### 開発ワークフロー

```bash
# 依存関係をインストール
pnpm install

# 開発サーバーを起動
pnpm dev

# テストを実行
pnpm test

# コードをフォーマット
pnpm format

# 型チェック
pnpm check
```

---

## トラブルシューティング

### よくある問題

**問題**: 翻訳が表示されない
- **原因**: Google Gemini APIのクォータ枯渇またはAPIキーが無効
- **解決策**: 環境変数のAPIキーを確認し、Google AIStudioでクォータを確認

**問題**: arXivから論文が取得されない
- **原因**: ネットワーク接続またはarXiv APIのダウンタイム
- **解決策**: インターネット接続を確認し、arXiv APIのステータスを確認

**問題**: データベース接続エラー
- **原因**: 無効なDATABASE_URLまたはMySQLサーバーが起動していない
- **解決策**: MySQLが起動していることを確認し、接続文字列の形式を確認

**問題**: UIが読み込まれない
- **原因**: フロントエンドビルドが失敗またはサーバーが起動していない
- **解決策**: コンソールでエラーを確認し、`pnpm dev`を実行して再起動

---

## パフォーマンス指標

### ベンチマーク

| 操作 | 時間 | 注記 |
|-----------|------|-------|
| 論文取得（10キーワード） | 約5-10秒 | arXiv API応答時間に依存 |
| タイトル+要旨の翻訳 | 約2-3秒 | 論文ごと、Google Gemini API経由 |
| 50論文の表示 | <500ms | Reactレンダリング |
| データベースクエリ（ソート済み） | <100ms | 適切なインデックス使用時 |

### 最適化のヒント

1. **データベースインデックスを有効化**: 頻繁にクエリされるカラムに対して
2. **ページネーションを実装**: 大量の論文リスト用
3. **arXiv応答をキャッシュ**: APIコール削減のため
4. **静的アセットにCDNを使用**: OGP画像など
5. **翻訳リクエストをバッチ処理**: 複数論文の翻訳時

---

## ライセンス

このプロジェクトはMITライセンスの下でライセンスされています。詳細は[LICENSE](LICENSE)ファイルを参照してください。

---

## サポート・お問い合わせ

- **問題報告**: GitHub Issuesでバグを報告
- **ディスカッション**: コミュニティディスカッションに参加
- **メール**: support@papercatcher.dev

---

## 謝辞

- **arXiv**: 包括的な学術論文データベースを提供
- **Google Gemini**: 強力な翻訳機能を提供
- **Manus**: 優れたフルスタック開発プラットフォームを提供
- **React & TypeScript**: 優れたツールとライブラリのコミュニティ

---

**最終更新**: 2026年2月  
**バージョン**: 1.0.0  
**ステータス**: 本番環境対応
